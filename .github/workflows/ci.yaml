name: remote ssh command
on: [push]
jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: executing remote ssh commands using ssh key
      uses: appleboy/ssh-action@master
      with:
        host: us1-buyvm.tloxygen.com
        username: ze3kr
        key: ${{ secrets.KEY }}
        fingerprint: us1-buyvm.tloxygen.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGkVUbweurqnsdLAwXlBYiGYXRpZO5nhozC3jB5KZ0WM
        script: |-
          /usr/bin/git -C /home/ze3kr/sync/GuoZeyu.com pull &
          ssh us1-gcp.tloxygen.com 'nginx -s reload' &
          ssh hk1-gcp.tloxygen.com 'nginx -s reload' &
          ssh bj1-aliyun.tloxygen.com 'nginx -s reload' &
          wait
